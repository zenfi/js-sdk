{"version":3,"file":"index.js","sources":["../node_modules/js-cookie/src/js.cookie.js","../src/cookies.js","../src/dom.js","../src/fetcher.js","../src/url.js","../src/index.js","../src/utils.js"],"sourcesContent":["/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","const Cookies = require('js-cookie');\n\nfunction buildCookies({ domain }) {\n  const ONE_YEAR = 365;\n  const COOKIE_NAMES = {\n    id: 'zenfi_id',\n    token: 'zenfi_token',\n  };\n\n  const getCookie = (name) => Cookies.get(name);\n\n  const setCookie = (name, value, expires = ONE_YEAR) => Cookies.set(name, value, {\n    domain,\n    expires,\n    path: '/',\n    secure: true,\n  });\n\n  const removeCookie = (name) => Cookies.remove(name, {\n    domain,\n    path: '/',\n  });\n\n  const getId = () => getCookie(COOKIE_NAMES.id);\n\n  const setId = (value) => setCookie(COOKIE_NAMES.id, value);\n\n  const getToken = () => getCookie(COOKIE_NAMES.token);\n\n  const setToken = (value) => setCookie(COOKIE_NAMES.token, value);\n\n  const removeToken = (value) => removeCookie(COOKIE_NAMES.token, value);\n\n  return {\n    getId,\n    setId,\n    getToken,\n    setToken,\n    removeToken,\n    set: setCookie,\n    get: getCookie,\n  };\n}\n\nmodule.exports = {\n  buildCookies,\n};\n","const STRATEGIES = {\n  value: 'value',\n  nativeValue: 'nativeValue',\n  click: 'click',\n  text: 'text',\n};\n\n// Used for react apps. See: https://stackoverflow.com/questions/40894637/how-to-programmatically-fill-input-elements-built-with-react/70848568\nfunction setNativeValue(element, value) {\n  const valueSetter = Object.getOwnPropertyDescriptor(element, 'value').set;\n  const prototype = Object.getPrototypeOf(element);\n  const prototypeValueSetter = Object.getOwnPropertyDescriptor(prototype, 'value').set;\n\n  if (valueSetter && valueSetter !== prototypeValueSetter) {\n    prototypeValueSetter.call(element, value);\n  } else {\n    valueSetter.call(element, value);\n  }\n}\n\nfunction selectElement(selector) {\n  return document.querySelector(selector);\n}\n\nfunction fillTarget({ element, value, ...params }) {\n  const strategy = params.strategy || STRATEGIES.value;\n\n  // eslint-disable-next-line no-param-reassign\n  if (strategy === STRATEGIES.value) element.value = value;\n  if (strategy === STRATEGIES.nativeValue) setNativeValue(element, value);\n  // eslint-disable-next-line no-param-reassign\n  if (strategy === STRATEGIES.text) element.innerText = value;\n  if (strategy === STRATEGIES.click) element.click();\n  return element;\n}\n\nmodule.exports = {\n  fillTarget,\n  selectElement,\n};\n","const ENDPOINTS = {\n  leadsInfo: {\n    url: 'https://api.zenfi.mx/products/leads/info',\n    method: 'GET',\n  },\n  trackEvent: {\n    url: 'https://api.zenfi.mx/webhooks/leads/:partner/:type',\n    method: 'POST',\n  },\n};\n\nconst DEFAULT_HEADERS = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json',\n};\n\nasync function fetchLeadInfo(token) {\n  const { url: baseUrl, method } = ENDPOINTS.leadsInfo;\n  const url = `${baseUrl}?token=${token}`;\n\n  const response = await fetch(url, {\n    method,\n    headers: DEFAULT_HEADERS,\n  });\n  const data = await response.json();\n  if (response.ok) return data.info || {};\n  if (response.status === 401) throw new Error('UNAUTHORIZED');\n  throw new Error(data.code);\n}\n\nfunction trackEvent({\n  meta,\n  type,\n  event,\n  partner,\n  zenfiId,\n}) {\n  const { url: baseUrl, method } = ENDPOINTS.trackEvent;\n  const url = baseUrl\n    .replace(':type', type)\n    .replace(':partner', partner);\n\n  const body = {\n    zenfiId,\n    event,\n    meta,\n  };\n\n  return fetch(url, {\n    method,\n    headers: DEFAULT_HEADERS,\n    body: JSON.stringify(body),\n  })\n    .then((response) => response.json());\n}\n\nmodule.exports = {\n  fetchLeadInfo,\n  trackEvent,\n};\n","const URL_PARAMS = {\n  id: 'zfid',\n  token: 'zftoken',\n};\n\nfunction getUrlParams(location) {\n  const searchParams = new URLSearchParams(location.search);\n\n  return {\n    id: searchParams.get(URL_PARAMS.id) || null,\n    token: searchParams.get(URL_PARAMS.token) || null,\n  };\n}\n\nfunction removeUrlParams(originalUrl) {\n  const url = new URL(originalUrl);\n  const searchParams = new URLSearchParams(url.search);\n\n  searchParams.delete(URL_PARAMS.token);\n  url.search = searchParams.toString();\n  return url.toString();\n}\n\nmodule.exports = {\n  getUrlParams,\n  removeUrlParams,\n};\n","const { buildCookies } = require('./cookies');\nconst { fillTarget, selectElement } = require('./dom');\nconst { fetchLeadInfo, trackEvent } = require('./fetcher');\nconst { getUrlParams, removeUrlParams } = require('./url');\nconst { isNil, isFunction, addLocationChangeEvent } = require('./utils');\n\nclass ZenfiSDK {\n  constructor({ partnerName, cookiesDomain, targets } = {}) {\n    this._id = null;\n    this._token = null;\n    this.leadInfo = null;\n    this.partnerName = partnerName;\n    this.targets = targets;\n    this.cookies = buildCookies({ domain: cookiesDomain });\n    this._handleUrlParams();\n  }\n\n  _handleUrlParams() {\n    // eslint-disable-next-line no-restricted-globals\n    const { id, token } = getUrlParams(location);\n    if (id) this.id = id;\n    if (token) {\n      this.token = token;\n      // eslint-disable-next-line no-restricted-globals\n      history.replaceState(null, null, removeUrlParams(location.href));\n    }\n  }\n\n  set id(id) {\n    this._id = id || null;\n    this.cookies.setId(this._id);\n  }\n\n  get id() {\n    if (!this._id) this._id = this.cookies.getId();\n    return this._id;\n  }\n\n  set token(token) {\n    this._token = token || null;\n    if (!this._token) {\n      this.cookies.removeToken();\n      return;\n    }\n    this.cookies.setToken(this._token);\n  }\n\n  get token() {\n    if (!this._token) this._token = this.cookies.getToken();\n    return this._token;\n  }\n\n  async fetchData() {\n    if (!this.token) return null;\n    try {\n      if (!this.leadInfo) this.leadInfo = await fetchLeadInfo(this.token);\n    } catch (error) {\n      if (error.message.includes('UNAUTHORIZED')) this.token = null;\n    }\n    return this.leadInfo;\n  }\n\n  async fillTargets() {\n    await this.fetchData();\n    (this.targets || []).forEach((config) => {\n      const {\n        dataKey,\n        strategy,\n        beforeAction,\n        afterAction,\n      } = config || {};\n\n      const value = (this.leadInfo || {})[dataKey];\n      if (isNil(value)) return;\n\n      const selector = isFunction(config.selector)\n        ? config.selector({ dataKey, strategy, value })\n        : config.selector;\n      const params = { value, selector, strategy };\n\n      let element = selectElement(selector);\n      if (isFunction(beforeAction)) beforeAction({ ...params, element });\n\n      // Try to find the element again in case beforeAction changed the DOM\n      element = element || selectElement(selector);\n      if (!element) return;\n\n      element = fillTarget({ ...params, element });\n      if (isFunction(afterAction)) afterAction({ ...params, element });\n    });\n  }\n\n  trackEvent(type, name, properties) {\n    if (!this.token) return null;\n    if (!this.partnerName) throw new Error('Parameter \"partnerName\" is required to track events');\n    return trackEvent({\n      type,\n      partner: this.partnerName,\n      zenfiId: this.id,\n      event: name,\n      meta: properties,\n    });\n  }\n\n  trackConversion(name, properties) {\n    this.trackEvent('converted', name, properties);\n  }\n\n  trackAbortion(name, properties) {\n    this.trackEvent('aborted', name, properties);\n  }\n\n  trackPageView() {\n    const properties = {\n      href: window.location.href,\n      hash: window.location.hash,\n      search: window.location.search,\n      protocol: window.location.protocol,\n      hostname: window.location.hostname,\n      pathname: window.location.pathname,\n    };\n    this.trackConversion('PageView', properties);\n  }\n\n  initPageViewsTracking() {\n    this.trackPageView();\n    addLocationChangeEvent();\n    window.addEventListener('locationchange', () => this.trackPageView());\n  }\n}\n\nmodule.exports = ZenfiSDK;\n","function isNil(value) {\n  return value === null || value === undefined;\n}\n\nfunction isFunction(fn) {\n  return fn && {}.toString.call(fn) === '[object Function]';\n}\n\nfunction addLocationChangeEvent() {\n  const eventName = 'locationchange';\n  const { pushState, replaceState } = window.history;\n\n  window.history.pushState = (...args) => {\n    const response = pushState.apply(window.history, args);\n    window.dispatchEvent(new Event(eventName));\n    return response;\n  };\n\n  window.history.replaceState = (...args) => {\n    const response = replaceState.apply(window.history, args);\n    window.dispatchEvent(new Event(eventName));\n    return response;\n  };\n\n  window.addEventListener('popstate', () => {\n    window.dispatchEvent(new Event(eventName));\n  });\n}\n\nmodule.exports = {\n  isNil,\n  isFunction,\n  addLocationChangeEvent,\n};\n"],"names":["factory","extend","i","result","arguments","length","attributes","key","decode","s","replace","decodeURIComponent","init","converter","api","set","value","document","path","defaults","expires","Date","toUTCString","JSON","stringify","test","e","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","get","json","jar","cookies","parts","slice","join","charAt","name","read","parse","getJSON","remove","withConverter","module","Cookies","require$$0","STRATEGIES","ENDPOINTS","url","method","DEFAULT_HEADERS","Accept","token","baseUrl","fetch","headers","response","data","ok","info","status","Error","code","URL_PARAMS","buildCookies","domain","COOKIE_NAMES","getCookie","setCookie","secure","getId","setId","getToken","setToken","removeToken","fillTarget","element","strategy","valueSetter","Object","getOwnPropertyDescriptor","prototype","getPrototypeOf","prototypeValueSetter","call","setNativeValue","innerText","click","selectElement","selector","querySelector","fetchLeadInfo","trackEvent","meta","type","event","partner","zenfiId","body","then","getUrlParams","location","searchParams","URLSearchParams","search","id","removeUrlParams","originalUrl","URL","toString","isNil","isFunction","fn","addLocationChangeEvent","eventName","window","history","pushState","replaceState","args","apply","dispatchEvent","Event","addEventListener","partnerName","cookiesDomain","targets","_id","_token","leadInfo","_handleUrlParams","this","href","_context","message","includes","fetchData","forEach","config","dataKey","beforeAction","afterAction","_this","params","properties","hash","protocol","hostname","pathname","trackConversion","trackPageView","_this2"],"mappings":"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"}